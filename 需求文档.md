# SquadFile网盘产品需求文档

## 一、产品概述

### 1.0 产品背景
产品英文名称为SquadFile，中文名称小队快传。

### 1.1 产品定位
面向10-50人规模的中小微企业或小团队，提供轻量化文件存储、共享与权限管控服务，核心特点为**易安装部署、操作简洁、跨端可用**，无需专业IT运维即可快速落地，适配普通电脑硬件环境，满足团队日常协作需求。

### 1.2 核心价值
- 简化协作流程：集中管理团队文件，替代邮件、即时工具反复传输，提升协作效率；
- 低门槛落地：可视化部署向导+日常操作贴合用户习惯，降低非专业人员使用成本；
- 精细权限管控：文件夹级权限划分+加密访问，保障敏感文件安全；
- 多场景适配：支持网页端/移动端访问、多存储源对接，满足团队多样化使用场景。

## 二、目标用户与场景

### 2.1 目标用户
| 用户角色 | 核心需求 | 操作场景 |
|----------|----------|----------|
| 团队成员 | 上传/下载文件、预览文档、访问共享文件夹 | 日常工作中存储设计稿、方案文档，查看同事分享的资料 |
| 团队管理员 | 账号管理、存储配置、权限分配、系统维护 | 创建新员工账号、设置存储容量预警、处理成员密码重置请求 |

### 2.2 核心使用场景
1. **团队文件集中存储**：运营人员上传活动方案至"2024Q3活动"文件夹，设计师上传设计稿至对应子文件夹，避免文件散落；
2. **跨成员协作共享**：项目经理创建"项目进度"文件夹，设置"编辑者"权限分享给核心成员，成员可上传进度报告、下载参考资料；
3. **外部客户文件交付**：销售生成客户专属分享链接（带提取码+7天有效期），将合同文件分享给客户，实时查看客户是否下载；
4. **多端灵活访问**：员工在电脑端上传会议纪要后，通勤时通过手机端预览关键内容，出差时下载所需文件离线查看。

## 三、功能需求

### 3.1 账号与登录模块

#### 3.1.1 账号管理（管理员专属）
- **账号创建**：支持填写"账号名（唯一）、初始密码、所属部门（可选）"，提供"普通成员/部门负责人"角色模板，自动分配基础权限；
- **账号维护**：支持删除账号（删除前二次确认，关联文件自动转移至管理员指定目录）、重置密码（重置后为默认密码"123456a!"，用户首次登录需强制修改）；
- **密码规则**：新密码需满足"6位以上+字母+数字"复杂度，支持管理员设置"密码有效期（如90天）"，到期前提醒用户修改。

#### 3.1.2 登录功能
- **登录方式**：仅支持"账号+密码"登录，密码错误3次后账号临时锁定10分钟（防暴力破解）；
- **登录后引导**：新用户首次登录触发"新手引导"，管理员登录显示"待处理事项"（如存储容量预警、待分配权限请求）。

### 3.2 文件与文件夹管理模块

#### 3.2.1 文件夹操作
- **基础操作**：支持创建、重命名、删除、移动文件夹，界面逻辑贴合Windows文件管理器；
- **加密访问**：文件夹创建者/管理员可设置密码（4位以上，含字母+数字+特殊符号），支持"部分子文件夹加密，父文件夹不加密"，加密状态不强制继承（父文件夹加密时，子文件夹可选择继承或独立加密）；
- **权限管理**：仅支持文件夹级权限，分3类角色，默认子文件夹继承父文件夹权限（可手动修改）：

| 权限角色 | 操作权限 |
|----------|----------|
| 查看者   | 查看文件夹结构、预览/下载文件，不可修改/删除 |
| 编辑者   | 查看+上传/修改/删除文件夹内文件，不可删除文件夹本身 |
| 管理员   | 所有操作（含删除文件夹、修改权限、设置加密） |

#### 3.2.2 文件上传
- **基础上传**：支持单个/批量文件上传、文件夹批量上传，网页端支持拖拽上传；
- **分片上传**：单个文件＞100MB时自动启用分片上传（20MB/片，可配置），支持"分片级断点续传"，中断后仅需上传未完成分片，上传进度显示"整体进度+当前分片进度"；
- **上传限制**：单个文件最大支持1GB（可配置），支持常用格式（文档、图片、音视频等），不支持的格式上传时提示"不支持的文件类型"。

#### 3.2.3 文件下载
- **下载方式**：支持单个文件直接下载、多文件/文件夹打包下载（ZIP格式）；
- **限速控制**：管理员可设置全局下载速度（如1MB/s）或用户级限速（如部门负责人5MB/s），单位支持KB/s、MB/s；
- **下载日志**：记录"下载时间、用户账号、文件路径、文件大小、IP地址、设备类型"，管理员可按时间/用户/文件类型筛选，支持导出Excel备份。

#### 3.2.4 文件预览
- **支持格式**：

| 文件类型 | 支持格式 | 预览功能 |
|----------|----------|----------|
| 图片     | JPG、PNG、GIF、BMP | 缩放、旋转、查看详情 |
| 文档     | Word（.doc/.docx）、Excel（.xls/.xlsx）、PPT（.ppt/.pptx）、PDF、TXT、MD、CSV、XML、HTML、JS、CSS | 翻页、缩放、文本搜索（Office文档通过OnlyOffice预览，用户需单独部署） |
| 音视频   | 音频（MP3、WAV、AAC、FLAC、M4A、WMA）、视频（MP4、MOV，≤200MB） | 音频：播放/暂停、进度条、音量调节、后台播放；视频：播放控制、倍速、全屏 |

- **不支持格式**：3D文件（.obj/.stl）、专业设计文件（.psd/.ai）等，点击时直接触发下载。

### 3.3 文件分享模块

#### 3.3.1 链接生成
- **直链**：永久有效链接（含完整文件路径），文件删除后失效，仅文件所有者/管理员可禁用；
- **短链**：简化短码（8位Base62编码），支持设置有效期（1小时/1天/7天/30天/自定义），过期后访问提示"链接已过期"；
- **链接权限**：加密文件夹的文件链接，访问时需先输入文件夹密码，支持添加4位提取码（默认自动生成）。

#### 3.3.2 分享统计
- **统计内容**：记录链接"访问次数（同一IP1小时内多次访问计1次）、下载次数、最近访问时间、访问地域"，仅文件所有者和管理员可见；
- **查看方式**：在"我的分享"页面按"访问次数降序/最近访问时间"筛选，支持查看单条链接的详细统计曲线（近7天访问趋势）。

### 3.4 存储源

#### 3.4.1 支持存储源类型
| 存储源类型 | 对接方式 | 核心配置项 |
|------------|----------|------------|
| 本地存储   | 直接读写服务器目录 | 存储路径、容量上限 |

### 3.5 跨端支持模块

#### 3.5.1 技术方案
采用Uniapp统一开发，一套代码适配三端，核心功能保持一致，仅按端特性微调交互：

| 端类型 | 适配范围 | 交互优化 |
|--------|----------|----------|
| 网页端 | 电脑（≥1200px）、平板（768px-1199px） | 支持拖拽上传、快捷键、右键菜单，平板端折叠侧边导航 |
| 安卓端 | Android 6.0+，屏幕4.7-6.7英寸 | 调用系统相册/文件管理器上传，支持后台音频播放、锁屏控制 |
| 苹果端 | iOS 11.0+，屏幕4.7-6.7英寸 | TestFlight分发测试版，支持深色模式，下载文件保存至"文件"应用 |

#### 3.5.2 响应式设计
- **布局适配**：
  - 电脑端：完整文件列表+侧边导航，支持多列网格视图；
  - 平板端：横屏多列展示，竖屏单列展示，侧边导航可手动展开/折叠；
  - 手机端：单列文件列表，侧边导航通过顶部菜单唤起，操作按钮简化为图标；
- **交互适配**：电脑端支持鼠标右键，移动端支持长按弹出操作菜单，横竖屏切换时自动调整布局。

### 3.6 搜索与快捷键模块

#### 3.6.1 文件搜索
- **基础功能**：顶部搜索框支持"文件名模糊匹配、忽略大小写"，实时显示搜索建议，结果按"修改时间降序"排序；
- **多维度筛选**：搜索结果页支持按"文件类型、存储源、修改时间（今天/近7天/近30天/自定义）、文件大小（＜10MB/10MB-100MB/＞100MB）"筛选，条件实时生效，显示已选标签；
- **权限过滤**：自动过滤无权限文件，无结果时提示"无匹配文件"并建议放宽筛选条件，搜索响应时间≤500ms（文件1万+时）。

#### 3.6.2 快捷键支持
仅电脑端生效，焦点在输入框时除Esc外其他快捷键失效：

| 快捷键 | 功能描述 | 适用场景 |
|--------|----------|----------|
| Ctrl + A | 全选当前目录文件/文件夹 | 列表/网格视图 |
| Ctrl + 左键单击 | 非连续多选 | 逐个选择目标 |
| Shift + 左键单击 | 连续范围选择 | 选择相邻文件 |
| Esc | 取消所有选择 | 任何选中状态 |
| Ctrl + C | 复制选中内容 | 准备粘贴到其他目录 |
| Ctrl + V | 粘贴复制内容 | 目标目录 |
| Delete | 删除选中内容 | 需二次确认 |
| Enter | 打开文件夹/预览文件 | 快速访问 |
| Ctrl + F | 聚焦搜索框 | 快速发起搜索 |

### 3.7 新手引导模块

#### 3.7.2 引导体验
- 进度展示：顶部显示"步骤X/3"进度条，清晰告知完成情况；
- 反馈与退出：每步完成弹出操作技巧提示，提供"跳过引导"按钮（hover显示），退出后下次登录从上次步骤续接；
- 完成奖励：全部步骤完成后显示"恭喜掌握核心操作"弹窗，提供"去使用"按钮跳转至文件列表页。

### 3.8 系统管理模块

#### 3.8.1 管理员后台
- **核心模块**：能模块，界面简洁：
  - 用户管理：账号列表（新增/删除/重置密码）、部门划分、权限分配；
  - 文件和文件夹管理：列表/新增/删除/修改名称、权限分配；
  - 系统设置：端口修改、下载限速、文件类型限制（允许查看/上传的格式）、网站名称修改、登录页LOGO和首页LOGO配置；

#### 3.8.2 系统设置
- **网站名称修改**：支持自定义网站显示名称，修改后在登录页和首页标题中显示；
- **登录页LOGO配置**：支持上传自定义登录页LOGO图片，支持常见图片格式（JPG、PNG、GIF），建议尺寸200x60px；
- **首页LOGO配置**：支持上传自定义首页LOGO图片，支持常见图片格式（JPG、PNG、GIF），建议尺寸120x40px；
- **语言设置**：支持中文和英文两种显示语言，管理员可设置系统默认语言，用户可在登录页和首页通过下拉列表切换显示语言；
- **配置预览**：提供配置预览功能，管理员可实时查看配置效果；
- **配置恢复**：支持恢复默认配置，一键还原系统默认LOGO和网站名称；
- **文件存储**：上传的LOGO文件存储在系统指定目录；
- **格式限制**：支持JPG、PNG、GIF格式，单个文件大小限制2MB；

#### 3.8.3 系统日志
- **登录日志**：记录所有用户的登录尝试，包括成功和失败的登录，记录内容包括：
  - 登录时间
  - 用户账号
  - IP地址
  - 登录结果（成功/失败）
  - 失败原因（如密码错误、账户锁定等）
- **下载日志**：记录所有文件下载操作，记录内容包括：
  - 下载时间
  - 用户账号
  - 文件路径
  - 文件大小
  - IP地址
  - 设备类型
- **日志管理**：管理员可按时间、用户、IP地址等条件筛选日志，支持导出日志为Excel格式进行备份；

#### 3.8.4 统计报表
- **基础统计**：显示系统关键指标的概览，包括：
  - 总用户数
  - 总文件数
  - 总文件夹数
  - 存储使用量
  - 总下载数
- **最新上传**：显示最新上传的10个文件列表，包含文件名称、大小、上传时间、上传人；
- **文件类型分布**：统计系统中各种文件类型的分布情况；
- **分享链接统计**：统计总分享链接数和活跃链接数；
- **下载统计**：统计文件被下载的次数，显示下载次数最多的文件列表；

## 四、技术需求

### 4.1 开发框架与语言
- 后端：.NET 9.0；
- 前端：Uniapp（基于Vue3），实现网页端/H5/安卓/苹果端统一开发；
- 数据库：支持SQLite（轻量化，≤20人团队）、MySQL（≥20人团队），自动适配表结构，配置加密存储。

### 4.3 第三方集成
- 

### 4.4 性能与安全
- **性能要求**：
  - 上传速度：100Mbps网络下，1GB文件分片上传耗时≤5分钟；
  - 预览响应：普通文件≤2秒，Office文档≤5秒；
  - 并发支持：20人同时在线无延迟，10人同时下载无日志卡顿；
- **安全要求**：
  - 密码存储：账号和文件夹密码SHA256加密；
  - 日志安全：下载日志仅管理员可见，操作日志记录"谁查看了日志"。

## 五、非功能需求

### 5.1 易用性要求
- 学习成本：新用户完成核心操作（上传-分享-下载）耗时≤5分钟；
- 错误提示：避免技术术语，采用"人话化"表述（如"存储连接不上，检查网络"）；
- 帮助支持：提供"新手引导""操作技巧弹窗"，管理员后台提供"帮助文档"链接。

### 5.2 兼容性要求
- 浏览器：网页端支持Chrome 90+、Edge 90+、Firefox 88+、Safari 14+；
- 设备：移动端支持主流机型，分辨率适配4.7-6.7英寸屏幕；
- 系统：部署端支持Windows 10+/Linux Ubuntu 18.04+/CentOS 7+。

## 六、持续升级

2. **后续优化**：可基于实际使用反馈调整细节（如筛选维度、引导文案），核心功能框架无需变更，确保产品"轻量、易用"定位。